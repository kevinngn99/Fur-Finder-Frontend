#:import utils kivy.utils
#:import MDDropdownMenu kivymd.uix.menu
#:import ScreenManager kivy.uix.screenmanager
#:import Screen kivy.uix.screenmanager

<MDMenuItem>:
    on_release:
        print(self.text)
        app.root.menu_button.text = self.text
        #app.root.menu_button.text = self.text
        #app.root.menu_button.text
        #root.menu_button.text = self.text

<ReportView>:
    gender_button: gender
    size_button: size_item
    age_button: age
    state_button: state_item
    zip_button: zip
    location_button: location
    TopPage:

    MDTextField:
        hint_text: "Pet Name"
        mode: "rectangle"
        pos_hint: {"center_x": .5, "center_y": .85}
        size_hint_x: (None)
        width: dp(250)
        #onrelease do something

    MDRectangleFlatIconButton:
        id: gender
        icon: "chevron-down"
        pos_hint: {'center_x': .3, 'center_y': .75}
        size_hint_x: (None)
        width: dp(130)
        text: "Gender"
        on_release:
            app.root.menu_button = gender
            root.gender_menu.check_position_caller(None, None, None)
            root.gender_menu.open()
        #on_release:
            #app.gender_menu.check_position_caller(None, None, None)
            #app.gender_menu.open()

    MDRectangleFlatIconButton:
        id: age
        icon: "chevron-down"
        size_hint_x: (None)
        width: dp(130)
        pos_hint: {'center_x': .690, 'center_y': .75}
        text: 'Age'
        on_release:
            app.root.menu_button = age
            root.age_menu.check_position_caller(None,None,None)
            root.age_menu.open()

    MDRectangleFlatIconButton:
        id: breed_item
        icon: "chevron-down"
        size_hint: (None,None)
        height: dp(40)
        width: dp(277)
        pos_hint: {'center_x': .5, 'center_y': .65}
        text: 'Breed'
        on_release: app.breed_menu.open()

    MDRectangleFlatIconButton:
        id: size_item
        icon: "chevron-down"
        size_hint_x: (None)
        width: dp(135)
        pos_hint: {'center_x': .3, 'center_y': .55}
        text: 'Size'
        on_release:
            app.root.menu_button = size_item
            root.size_menu.check_position_caller(None, None, None)
            root.size_menu.open()

    MDRectangleFlatIconButton:
        id: calendar
        icon: "calendar"
        text: "Date Missing"
        pos_hint: {'center_x': .675, 'center_y': .55}
        width: dp(135)
        on_release:
            root.date_picker()

    MDRectangleFlatIconButton:
        id: state_item
        icon: "chevron-down"
        size_hint_x: (None)
        width: dp(135)
        pos_hint: {'center_x': .3, 'center_y': .45}
        text: 'State'
        on_release:
            app.root.menu_button = state_item
            root.state_menu.check_position_caller(None,None,None)
            root.state_menu.open()

    MDRectangleFlatIconButton:
        pos_hint: {"center_x": .5, "center_y": .30}
        text: 'Submit'
        on_release:
            root.post_report()

    MDTextField:
        id: zip
        size_hint_x: (None)
        width: dp(90)
        pos_hint: {'center_x': .675, 'center_y': .45}
        hint_text: 'Zip'

    MDTextField:
        id: location
        hint_text: "Location"
        mode: "rectangle"
        icon_right: "map-marker"
        icon_right_color: app.theme_cls.primary_color
        pos_hint: {"center_x": .5, "center_y": .35}
        size_hint_x: (None)
        width: dp(255)

    MDGridLayout:
        cols: 3
        row_default_height: (self.width - self.cols*self.spacing[0]) / self.cols
        row_force_default: True
        size_hint: (None,None)
        height: 600
        width: 380
        adaptive_height: True
        padding: dp(4), dp(4)
        spacing: dp(4)
        pos_hint: {"center_x": .5, "center_y": .2}

        SmartTileWithLabel:
            source: "images/aussie.jpg"
            text: "[size=12]Aussie[/size]"

        SmartTileWithLabel:
            source: "images/corgi.jpg"
            text: "[size=12]Corgi[/size]\n[size=10]Add more info here[/size]"
            tile_text_color: app.theme_cls.accent_color

        SmartTileWithLabel:
            text: "[size=12]Blank Tile[/size]\n[size=10]More black space[/size]"
            tile_text_color: app.theme_cls.accent_color


<TopPage>:
    BoxLayout:
        orientation: "vertical"
        AnchorLayout:
            height: dp(85)
            anchor_x: "left"
            anchor_y: "center"
            padding: dp(50), dp(35), dp(35), dp(0)
            Label:
                text: "Report a Pet"
                color: app.theme_cls.primary_color
                pos_hint: {"center_x": .4, "center_y": .60}
                text_size: self.size
                font_size: sp(40)
                font_name: 'assets/Inter-SemiBold.ttf'
                halign: "left"
                valign: "top"
